<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classroom Occupancy Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="main-content">
        <div class="text-container" id="initial-text">
            <h1 class="text-heading">Classroom-Occupancy Tracker</h1>
            <p class="text-quote">"Track today, plan tomorrow."</p>
        </div>

        <div class="login-wrapper">
            <div class="login-container" id="user-login">
                <h2>User Login</h2>
                <form id="loginForm">
                    <div class="input-container">
                        <input type="text" id="user-username" name="username" placeholder="Username" required>
                        <label class="label">Username</label>
                        <span class="topline"></span>
                        <span class="underline"></span>
                    </div>
                    <div class="input-container">
                        <input type="password" id="user-password" name="password" placeholder="Password" required>
                        <label class="label">Password</label>
                        <span class="topline"></span>
                        <span class="underline"></span>
                    </div>
                    <button type="submit" class="login-button">Login</button>
                </form>
                <a href="#" class="forgot-password" onclick="forgotPassword()">Forgot Password?</a>
                <a href="#" class="forgot-password" id="create-account-link" onclick="showPasskeyModal()">Create Account</a>
                <p class="error-message" id="user-error"></p>
            </div>
            <button class="check-status-button" onclick="checkStatus()">Check Status Without Login</button>
        </div>

        <div id="tracker-container">
            <header>
                <h1>Classroom Occupancy Tracker</h1>
                <div class="header-buttons">
                    <button id="logout-btn" class="header-btn" onclick="logout()" style="display: none;">Logout</button>
                    <button id="exit-btn" class="header-btn" onclick="exit()" style="display: none;">Exit</button>
                </div>
            </header>
            
            <div class="button-container" id="user-options">
                <button onclick="showAvailable()">Show Available</button>
                <button onclick="showOccupied()">Show Occupied</button>
                <button onclick="showAll()">Show All</button>
                <button id="user-logout-btn" class="button-container button" onclick="logout()" style="display: none; background: var(--redFire);">Logout</button>
            </div>
            
            <section id="room-status">
                <h2>Real-Time Room Occupancy</h2>
                <div id="rooms" class="room-container"></div>
            </section>
            
            <section id="labs">
                <h2>Lab Availability</h2>
                <div id="labs-container"></div>
            </section>
            
            <h3 id="ai-suggestion"></h3>
        </div>
    
        <div class="forgot-password-modal" id="forgot-password-modal">
            <div class="forgot-password-container">
                <span class="close-modal" onclick="closeForgotPasswordModal()">×</span>
                <h3>Reset Password</h3>
                <p>Enter your username to receive password reset instructions.</p>
                <input type="text" id="reset-username" placeholder="Username">
                <button class="reset-password-btn" onclick="resetPassword()">Send Reset Link</button>
                <p class="success-message" id="reset-success" style="display: none;">Reset instructions have been sent to your email.</p>
                <p class="error-message" id="reset-error" style="display: none;">Username not found. Please try again.</p>
            </div>
        </div>

        <div class="forgot-password-modal" id="create-account-modal" style="display: none;">
            <div class="forgot-password-container">
                <span class="close-modal" onclick="closeCreateAccountModal()">×</span>
                <h3>Create Account</h3>
                <input type="text" id="new-username" placeholder="Username">
                <input type="password" id="new-password" placeholder="Password">
                <input type="password" id="confirm-password" placeholder="Confirm Password">
                <button class="reset-password-btn" onclick="createAccount()">Create</button>
                <p class="success-message" id="create-success">Account created successfully!</p>
                <p class="error-message" id="create-error"></p>
            </div>
        </div>

        <div class="forgot-password-modal" id="reset-password-modal" style="display: none;">
            <div class="forgot-password-container">
                <span class="close-modal" onclick="closeResetPasswordModal()">×</span>
                <h3>Reset Your Password</h3>
                <input type="text" id="reset-username-field" placeholder="Username" readonly>
                <input type="password" id="new-password-reset" placeholder="New Password">
                <input type="password" id="confirm-password-reset" placeholder="Confirm New Password">
                <button class="reset-password-btn" onclick="submitNewPassword()">Reset Password</button>
                <p class="success-message" id="reset-password-success">Password reset successfully!</p>
                <p class="error-message" id="reset-password-error"></p>
            </div>
        </div>

        <div id="passkey-modal" class="forgot-password-modal">
            <div id="passkey-container">
                <span class="close-modal" onclick="closePasskeyModal()">×</span>
                <h3>Enter Admin Passkey</h3>
                <input type="password" id="passkey-input" placeholder="Passkey">
                <button onclick="validatePasskey()">Submit</button>
                <p class="error-message" id="passkey-error"></p>
            </div>
        </div>
    
        <div id="particles" class="particles"></div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="script.js"></script>
</body>
</html>